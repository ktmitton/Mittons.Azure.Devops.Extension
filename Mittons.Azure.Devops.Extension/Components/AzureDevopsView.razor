@using Mittons.Azure.Devops.Extension.Sdk;
@inject ISdk Sdk;

@if (isInitialized)
{
    @ChildContent
}

@code
{
    private bool isInitialized = false;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await Sdk.InitializeAsync(isLoaded: false);

        isInitialized = true;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await Sdk.NotifyLoadSucceededAsync();
        }
    }
}
